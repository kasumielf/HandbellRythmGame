<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Note Creator</title>
    <link rel="stylesheet" href="css/style.css" />
    <script src="scripts/script.js"></script>
</head>
<script>
    onloaded = function (notes) {
        var pixel = 40;
        var pos = 0;

        console.log("Notes loaded in creator:");
        console.log(notes);

        var lines = {
            'c': document.querySelector('.line-c'),
            'd': document.querySelector('.line-d'),
            'e': document.querySelector('.line-e'),
            'f': document.querySelector('.line-f'),
            'g': document.querySelector('.line-g'),
            'a': document.querySelector('.line-a'),
            'b': document.querySelector('.line-b'),
            'w': document.querySelector('.line-w'),
        };

        var sheets = {
            4: 'ğ…',       // ì˜¨ìŒí‘œ (whole)
            3: 'ğ…Â·',      // ì 2ë¶„ìŒí‘œ (dotted half)
            2: 'ğ…',       // 2ë¶„ìŒí‘œ (half)
            1.5: 'ğ…ŸÂ·',    // ì 4ë¶„ìŒí‘œ (dotted quarter)
            1: 'ğ…Ÿ',       // 4ë¶„ìŒí‘œ (quarter)
            0.75: 'ğ… Â·',   // ì 8ë¶„ìŒí‘œ (dotted eighth)
            0.5: 'ğ… ',     // 8ë¶„ìŒí‘œ (eighth)
            0.375: 'ğ…¡Â·',  // ì 16ë¶„ìŒí‘œ (dotted sixteenth)
            0.25: 'ğ…¡',    // 16ë¶„ìŒí‘œ (sixteenth)
            0.125: 'ğ…¢',   // 32ë¶„ìŒí‘œ (thirty-second)
            0.0625: 'ğ…£',  // 64ë¶„ìŒí‘œ (sixty-fourth)
            0.03125: 'ğ…¤'  // 128ë¶„ìŒí‘œ (one hundred twenty-eighth)
        }

        for (const n of notes) {
            console.log(n)
            if(n.code !== 'rest') {
                for (const c of n.codes) {
                    var elm = document.createElement('div');
                    elm.className = 'note ' + c;
                    elm.style.width = (pixel * n.beat) + 'px';
                    elm.style.left = pos + 'px';

                    elm.textContent = sheets[n.beat];
                    elm.style.fontSize = '20px';

                    lines[c].appendChild(elm);
                }
            }

            pos += pixel * n.beat;
        }
    };
</script>
    <body style="background:black;">
        <main>
            <div class="top">
                <div>
                    <span>
                        <label>ì•…ë³´</label>
                        <input type="file" accept="application/json" onchange="onChangeNoteFile(this.files)">
                    </span>
                </div>
            </div>
            <div style="margin-top:100px; overflow-y:auto; width:100%;">
                <div class="notes line-w" style="display:flex; flex-direction:row; flex-wrap:nowrap;">
                </div>
                <div class="notes line-b" style="display:flex; flex-direction:row; flex-wrap:nowrap;">
                </div>
                <div class="notes line-a" style="display:flex; flex-direction:row; flex-wrap:nowrap;">
                </div>
                <div class="notes line-g" style="display:flex; flex-direction:row; flex-wrap:nowrap;">
                </div>
                <div class="notes line-f" style="display:flex; flex-direction:row; flex-wrap:nowrap;">
                </div>
                <div class="notes line-e" style="display:flex; flex-direction:row; flex-wrap:nowrap;">
                </div>
                <div class="notes line-d" style="display:flex; flex-direction:row; flex-wrap:nowrap;">
                </div>
                <div class="notes line-c" style="display:flex; flex-direction:row; flex-wrap:nowrap;">
                </div>

            </div>
        </main>
    </body>
</html>